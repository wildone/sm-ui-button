<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simpla-core/simpla-core.html"> <link rel="import" href="../iron-icon/iron-icon.html"> <dom-module id="sm-ui-button"> <style include="sm-css-shady"></style> <style include="sm-css"></style> <style>:host{font:inherit;color:inherit;line-height:normal;background:0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;border:0;padding:0;outline:0;@apply(--typography);position:relative;height:var(--tool-size);cursor:pointer}:host::-moz-focus-inner{border:0;padding:0}:host([busy]),:host([disabled]){cursor:default;pointer-events:none}.content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;line-height:1}.content__icon{--iron-icon-width:var(--icon-size, 16px);--iron-icon-height:var(--icon-size, 16px);margin-right:.3em}.content__icon[no-content]{margin:0}</style> <template> <div class="content"> <iron-icon class="content__icon" icon="[[icon]]" no-content$="[[!_content]]" hidden$="[[!icon]]"></iron-icon> <content></content> </div> </template> <script>!function(){"use strict";var t={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();var e=function(e){e.exports;return function(i,n){"object"==("undefined"==typeof e?"undefined":t["typeof"](e))&&e.exports?e.exports=n():"function"==typeof define&&define.amd?define(n):i.Spinner=n()}(this,function(){function t(t,e){var i,n=document.createElement(t||"div");for(i in e)n[i]=e[i];return n}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,n){var o=["opacity",e,~~(100*t),i,n].join("-"),r=.01+i/n*100,s=Math.max(1-(1-t)/e*(100-r),t),a=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return p[o]||(u.insertRule("@"+l+"keyframes "+o+"{0%{opacity:"+s+"}"+r+"%{opacity:"+t+"}"+(r+.01)+"%{opacity:1}"+(r+e)%100+"%{opacity:"+t+"}100%{opacity:"+s+"}}",u.cssRules.length),p[o]=1),o}function n(t,e){var i,n,o=t.style;if(e=e.charAt(0).toUpperCase()+e.slice(1),void 0!==o[e])return e;for(n=0;n<f.length;n++)if(i=f[n]+e,void 0!==o[i])return i}function o(t,e){for(var i in e)t.style[n(t,i)||i]=e[i];return t}function r(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)void 0===t[n]&&(t[n]=i[n])}return t}function s(t,e){return"string"==typeof t?t:t[e%t.length]}function a(t){this.opts=r(t||{},a.defaults,h)}function l(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}u.addRule(".spin-vml","behavior:url(#default#VML)"),a.prototype.lines=function(t,n){function r(){return o(i("group",{coordsize:u+" "+u,coordorigin:-c+" "+-c}),{width:u,height:u})}function a(t,a,l){e(p,e(o(r(),{rotation:360/n.lines*t+"deg",left:~~a}),e(o(i("roundrect",{arcsize:n.corners}),{width:c,height:n.scale*n.width,left:n.scale*n.radius,top:-n.scale*n.width>>1,filter:l}),i("fill",{color:s(n.color,t),opacity:n.opacity}),i("stroke",{opacity:0}))))}var l,c=n.scale*(n.length+n.width),u=2*n.scale*c,f=-(n.width+n.length)*n.scale*2+"px",p=o(r(),{position:"absolute",top:f,left:f});if(n.shadow)for(l=1;l<=n.lines;l++)a(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=n.lines;l++)a(l);return e(t,p)},a.prototype.opacity=function(t,e,i,n){var o=t.firstChild;n=n.shadow&&n.lines||0,o&&e+n<o.childNodes.length&&(o=o.childNodes[e+n],o=o&&o.firstChild,o=o&&o.firstChild,o&&(o.opacity=i))}}var c,u,f=["webkit","Moz","ms","O"],p={},h={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(a.defaults={},r(a.prototype,{spin:function(e){this.stop();var i=this,n=i.opts,r=i.el=t(null,{className:n.className});if(o(r,{position:n.position,width:0,zIndex:n.zIndex,left:n.left,top:n.top}),e&&e.insertBefore(r,e.firstChild||null),r.setAttribute("role","progressbar"),i.lines(r,i.opts),!c){var s,a=0,l=(n.lines-1)*(1-n.direction)/2,u=n.fps,f=u/n.speed,p=(1-n.opacity)/(f*n.trail/100),h=f/n.lines;!function d(){a++;for(var t=0;t<n.lines;t++)s=Math.max(1-(a+(n.lines-t)*h)%f*p,n.opacity),i.opacity(r,t*n.direction+l,s,n);i.timeout=i.el&&setTimeout(d,~~(1e3/u))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(n,r){function a(e,i){return o(t(),{position:"absolute",width:r.scale*(r.length+r.width)+"px",height:r.scale*r.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/r.lines*u+r.rotate)+"deg) translate("+r.scale*r.radius+"px,0)",borderRadius:(r.corners*r.scale*r.width>>1)+"px"})}for(var l,u=0,f=(r.lines-1)*(1-r.direction)/2;u<r.lines;u++)l=o(t(),{position:"absolute",top:1+~(r.scale*r.width/2)+"px",transform:r.hwaccel?"translate3d(0,0,0)":"",opacity:r.opacity,animation:c&&i(r.opacity,r.trail,f+u*r.direction,r.lines)+" "+1/r.speed+"s linear infinite"}),r.shadow&&e(l,o(a("#000","0 0 4px #000"),{top:"2px"})),e(n,e(l,a(s(r.color,u),"0 0 1px rgba(0,0,0,.1)")));return n},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),"undefined"!=typeof document){u=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}();var d=o(t("group"),{behavior:"url(#default#VML)"});!n(d,"transform")&&d.adj?l():c=n(d,"animation")}return a}),e.exports}({exports:{}}),i=simpla.constants.easings,n=1.4,o=.8,r=.2,s=.6,a=7,l=2,c=3,u=12,f=200,p=180,h="busy cannot be called before element is attached",d={properties:{busy:{type:Boolean,observer:"_busyChanged",reflectToAttribute:!0}},get _spinnerOpts(){var t=parseFloat(this._buttonHeight)*o,e=t*r,i=e*s,f=a>e?l:c,p=parseFloat(this._buttonHeight)*n/2+"px",h=this._buttonColor,d=u,y="";return{color:h,lines:d,radius:e,length:i,width:f,left:p,zIndex:y}},get _buttonPaddingLeft(){return this.__buttonPaddingLeft||(this.__buttonPaddingLeft=window.getComputedStyle(this).paddingLeft),this.__buttonPaddingLeft},get _buttonHeight(){return this.__buttonHeight||(this.__buttonHeight=window.getComputedStyle(this).height),this.__buttonHeight},get _buttonColor(){return this.__buttonColor||(this.__buttonColor=window.getComputedStyle(this).color),this.__buttonColor},get _busyAnimation(){var t=this._buttonPaddingLeft,e=this.offsetHeight*n+"px";return{target:this,frames:[{"padding-left":t},{"padding-left":e}],opts:{open:{easing:i.easeOutBack,fill:"both",duration:f},close:{easing:i.easeOutCubic,fill:"both",duration:p}}}},_busyChanged:function(t,e){var i=this._spinner&&window.getComputedStyle(this).height;return i?void(t?this._goBusy():e&&this._stopBusy()):void console.warn(h)},_goBusy:function(){var t=this._busyAnimation,e=(t.target,t.frames),i=t.opts;Object.assign(this._spinner.opts,this._spinnerOpts),this.animate(e,i.open),this._spinner.spin(this)},_stopBusy:function(){var t=this._busyAnimation,e=(t.target,t.frames),i=t.opts;this.animate(e.reverse(),i.close),this._spinner.stop()},attached:function(){var t=new e;this._spinner=t}},y=function(){function e(){t.classCallCheck(this,e)}return t.createClass(e,[{key:"beforeRegister",value:function(){this.is="sm-ui-button",this["extends"]="button",this.properties={icon:{type:String,value:""},_content:String}}},{key:"attached",value:function(){this._content=Polymer.dom(this).innerHTML}},{key:"behaviors",get:function(){return[d,simpla.behaviors.active({reflectToAttribute:!0})]}}]),e}();Polymer(y)}()</script> </dom-module>